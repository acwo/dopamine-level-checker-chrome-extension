<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>D-Level Analysis</title>
		<style>
			* {
				box-sizing: border-box;
			}
			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				padding: clamp(10px, 3vw, 20px);
				min-width: 280px;
				max-width: 100%;
				color: #e8e8e8;
				background-color: #181818;
				font-size: clamp(13px, 2.5vw, 15px);
				margin: 0;
				overflow-x: hidden;
			}
		h3 {
			font-size: clamp(1.05em, 3vw, 1.2em);
			margin-bottom: 6px;
			margin-top: 0;
			word-wrap: break-word;
		}
		#status {
			font-style: italic;
			color: #aaa;
			font-size: clamp(0.85em, 2.3vw, 0.95em);
		}
		.section-header {
			position: relative;
			margin-bottom: clamp(8px, 2vw, 14px);
		}
		#summary-result {
			background-color: #2f2f2f;
			border: 1px solid #3e3e3e;
			border-radius: 5px;
			padding: clamp(10px, 2.5vw, 16px);
			margin-top: clamp(8px, 2vw, 12px);
			min-height: 50px;
			line-height: 1.5;
			max-height: 70vh;
			overflow-y: auto;
			overflow-x: hidden;
			font-size: clamp(0.85em, 2.2vw, 0.95em);
			word-wrap: break-word;
		}
		#summary-result h1,
		#summary-result h2,
		#summary-result h3 {
			color: #FF7043;
			margin-top: 16px;
			margin-bottom: 8px;
		}
		#summary-result h1 {
			font-size: 1.3em;
		}
		#summary-result h2 {
			font-size: 1.15em;
		}
		#summary-result h3 {
			font-size: 1em;
		}
		#summary-result p {
			margin: 8px 0;
			font-size: 1em;
		}
		#summary-result ul,
		#summary-result ol {
			margin: 8px 0;
			padding-left: 24px;
		}
		#summary-result li {
			margin: 5px 0;
			font-size: 1em;
		}
		#summary-result strong {
			color: #fff;
			font-weight: 600;
		}
		#summary-result code {
			background-color: #1a1a1a;
			padding: 2px 6px;
			border-radius: 3px;
			font-family: 'Courier New', monospace;
			font-size: 0.9em;
		}
		button {
			width: 100%;
			padding: clamp(9px, 2vw, 13px) clamp(10px, 2.5vw, 16px);
			margin-top: clamp(8px, 2vw, 12px);
			background: linear-gradient(135deg, #FFA726 0%, #FF7043 100%);
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: clamp(0.85em, 2.2vw, 0.95em);
			font-weight: 500;
			transition: all 0.2s;
			box-shadow: 0 2px 8px rgba(255, 167, 38, 0.3);
			white-space: normal;
			word-wrap: break-word;
			min-height: 38px;
		}
		button:hover {
			background: linear-gradient(135deg, #FF7043 0%, #FF5722 100%);
			box-shadow: 0 4px 12px rgba(255, 112, 67, 0.4);
			transform: translateY(-1px);
		}
		button:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}
		input[type="password"] {
			width: 100%;
			padding: clamp(8px, 2vw, 12px);
			margin-top: clamp(6px, 1.5vw, 10px);
			background-color: #2f2f2f;
			border: 1px solid #3e3e3e;
			border-radius: 5px;
			color: #e8e8e8;
			font-size: clamp(0.85em, 2.2vw, 0.95em);
			box-sizing: border-box;
		}
		input[type="password"]::placeholder {
			color: #666;
		}
		hr {
			border: none;
			border-top: 1px solid #3e3e3e;
			margin: clamp(12px, 3vw, 20px) 0;
		}
		.ai-badge {
			display: inline-block;
			padding: clamp(2px, 0.8vw, 4px) clamp(6px, 1.5vw, 10px);
			border-radius: 4px;
			font-size: clamp(0.65em, 1.8vw, 0.75em);
			font-weight: 600;
			letter-spacing: 0.3px;
			margin-bottom: clamp(4px, 1vw, 8px);
			text-transform: uppercase;
		}
		.description-text {
			font-size: clamp(0.85em, 2.1vw, 0.92em);
			color: #aaa;
			line-height: 1.4;
			margin-top: clamp(3px, 1vw, 5px);
			margin-bottom: clamp(6px, 1.5vw, 10px);
		}
		.tip-box {
			background: linear-gradient(135deg, #FFA726 0%, #FF7043 100%);
			padding: clamp(8px, 2vw, 12px) clamp(10px, 2.5vw, 14px);
			border-radius: 5px;
			margin-bottom: clamp(10px, 2.5vw, 16px);
			font-size: clamp(0.82em, 2vw, 0.9em);
			color: white;
			line-height: 1.4;
			box-shadow: 0 2px 8px rgba(255, 167, 38, 0.3);
			word-wrap: break-word;
		}
		</style>
	</head>
	<body>
		<div class="tip-box">
			üí° <strong>Tip:</strong> Analyses run in the background. You can navigate to other videos or websites while they complete.
		</div>
		<div class="section-header">
			<div class="ai-badge" style="background: linear-gradient(90deg, #FFA726 0%, #FF7043 100%); color: white; box-shadow: 0 2px 6px rgba(255, 167, 38, 0.3);">
				üì± Client AI
			</div>
			<h3>Promise Analysis (Gemini Nano)</h3>
			<p class="description-text">What experience does this content promise based on its metadata?</p>
		</div>
		<p id="status">Waiting for text...</p>
		<button id="run-client-analysis" style="display: none;">Start Promise Analysis</button>
		<div id="summary-result"></div>
		<hr />
		<div class="section-header">
			<div class="ai-badge" style="background: linear-gradient(90deg, #FF7043 0%, #FF5722 100%); color: white; box-shadow: 0 2px 6px rgba(255, 112, 67, 0.3);">
				‚òÅÔ∏è Server AI
			</div>
			<h3>Full Video Analysis (Gemini 2.5 Pro)</h3>
			<p class="description-text">Complete D-Level analysis by watching the actual video</p>
		</div>
		<div id="api-key-section" style="display: none;">
			<p style="color: #ff6b6b; font-size: 0.9em; margin-top: 4px; margin-bottom: 8px;">‚ö†Ô∏è Gemini API key required</p>
			<input type="password" id="api-key-input" placeholder="Enter your Gemini API key" />
			<button id="save-api-key">Save API Key</button>
			<p style="font-size: 0.85em; color: #aaa; margin-top: 8px; line-height: 1.4;">
				Get your free API key at <a href="https://aistudio.google.com/apikey" target="_blank" style="color: #FFA726; text-decoration: underline;">Google AI Studio</a>
			</p>
		</div>
		<p id="server-status" style="font-size: 0.95em;"></p>
		<button id="run-full-analysis">Run Full D-Level Analysis (Server)</button>
		<script src="sidepanel.js"></script>
	</body>
</html>
